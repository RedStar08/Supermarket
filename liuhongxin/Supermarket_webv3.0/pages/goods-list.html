<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>商品-超市管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <link rel="stylesheet" href="../layui/css/layui.css">

    <script src="../layui/layui.js"></script>
    <script src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/xadmin.js"></script>
  </head>
  
  <body class="layui-anim">
    <!-- 商品刷新 -->
    <div class="x-nav">
      <span class="layui-breadcrumb">
        <a><cite>商品详细清单</cite></a>
      </span>
      <a class="layui-btn layui-btn-primary layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" 
      href="javascript:location.replace(location.href);" title="刷新">
        <i class="layui-icon" style="line-height:1.6em;margin-top:3px;float:right">&#xe669;</i></a>
    </div>
    <!-- 商品查询 -->
    <div class="x-body">
      <div class="layui-row" style="text-align: center;">
        <form class="layui-form layui-col-md12 x-so" action="" method="post">
          <input type="text" name="goods_ID"  placeholder="请输入商品编号" autocomplete="off" class="layui-input">
          <button class="layui-btn"  lay-submit="" lay-filter="sreach-goods-id">
            <i class="layui-icon">&#xe615;</i>
          </button>
        </form>
      </div>
      <xblock>
        <button class="layui-btn layui-btn-danger" onclick="delAll()">
          <i class="iconfont">&#xe69d;</i>批量删除
        </button>
        <button class="layui-btn" onclick="x_admin_show('添加商品','./goods-add.html',800,600)">
          <i class="iconfont">&#xe6b9;</i>添加商品
        </button>
        <span class="x-right" style="line-height:40px">共有数据：88 条</span>
      </xblock>
      <!-- 表格信息 -->
      <table class="layui-table" lay-filter="demo">
        <!-- 表头 -->
        <thead>
          <tr>
            <th>
              <div class="layui-unselect header layui-form-checkbox" lay-skin="primary"><i class="layui-icon">&#xe605;</i></div>
            </th>
            <th lay-data="{ sort: true}">商品ID</th>
            <th >商品名称</th>
            <th>商品分类</th>
            <th >零售价</th>
            <th>规格</th>
            <th>保质期</th>
            <th>备注</th>
            <th>状态</th>
            <th>操作</th>
          </tr>
        </thead>
        <!-- 表单条数据 -->
        <!-- 包含图标说明 -->
        <tbody>
          <tr>
            <td>
              <div class="layui-unselect layui-form-checkbox" lay-skin="primary" data-id='商品ID'>
                <i class="layui-icon">&#xe605;</i>
              </div>
            </td>
            <td>000001</td>
            <td>百事可乐</td>
            <td>饮料</td>
            <td>3.00</td>
            <td>瓶</td>
            <td>6个月</td>
            <td>夏季可适当增加采购量</td>
            <!-- 商品操作 -->
            <td class="td-status">
              <span class="layui-btn layui-btn-normal layui-btn-sm">正上架</span></td>
            <td class="td-manage">
              <a title="上架" onclick="goods_stop(this,'商品ID')" class="layui-btn layui-btn-sm layui-btn-primary" 
              href="javascript:;"  >
              上下架
              </a>
              <a title="编辑" class="layui-btn layui-btn-sm layui-btn-normal"  onclick="x_admin_show('编辑','member-edit.html',600,400)" href="javascript:;">
                编辑
              </a>
              <a title="删除" class="layui-btn layui-btn-sm layui-btn-danger" onclick="goods_del(this,'要删除的商品ID')" href="javascript:;">
                删除
              </a>
            </td>
          </tr>
          <!-- 表单条数据 -->
          <!-- 图标 -->
          <tr>
            <td>
              <div class="layui-unselect layui-form-checkbox" lay-skin="primary" data-id='2'><i class="layui-icon">&#xe605;</i></div>
            </td>
            <td>000002</td>
            <td>可口可乐</td>
            <td>饮料</td>
            <td>3.00</td>
            <td>瓶</td>
            <td>6个月</td>
            <td>夏季可适当增加采购量</td>
            <td class="td-status">
              <span class="layui-btn layui-btn-normal layui-btn-sm">正上架</span></td>
            <td class="td-manage">
              <a title="上架" onclick="goods_stop(this,'10001')" href="javascript:;" >
                <i class="layui-icon">&#xe601;</i>
              </a>
              <a title="编辑"  onclick="x_admin_show('编辑','member-edit.html',600,400)" href="javascript:;">
                <i class="layui-icon">&#xe642;</i>
              </a>
              <a title="删除" onclick="goods_del(this,'要删除的id')" href="javascript:;">
                <i class="layui-icon">&#xe640;</i>
              </a>
            </td>
          </tr>
  
        </tbody>
      </table>
      <!-- 表格信息结束  -->
    </div>
    <!-- 翻页 --> 
    <div id="goods-list" style="text-align: center;"></div>
    <!-- 页面管理结束 -->
    <script>
layui.use('laypage', function(){
      var laypage = layui.laypage;
      //执行一个laypage实例
      //'count', 'prev', 'page', 'next', 'limit', 'refresh', 'skip',
      laypage.render({
        elem: 'goods-list' //注意，这里的是 ID，不用加 # 号
        ,count: 50 //数据总数，从服务端得到
        ,skin: 'row' //表格风格
        ,even: true
        ,size: 'lg' //尺寸
        ,page: true //是否显示分页
        ,limits: [2,4,6]
        ,curr:2
        ,limit: 10 //每页默认显示的数量
        ,layout: ['prev', 'page', 'next', 'count', 'limit', 'skip']
        ,jump: function(obj,first){
                    //obj包含了当前分页的所有参数，比如：
                    // console.log(obj.curr);  //得到当前页，以便向服务端请求对应页的数据。
                    // console.log(obj.limit); //得到每页显示的条数
                    //首次不执行,使用原始的curr,后面需要自己通过回传来更新
                    if(!first){
                        // location.href='goods-list.php?&page='+obj.curr+'&pagesize='+obj.limit;
                    }
                }

      });


});

       /*商品-下架*/
      function goods_stop(obj,id){
        if($(obj).attr('title')=='上架'){
          layer.confirm('确认要下架吗？',function(index){   
                //发异步把用户状态进行更改
                $(obj).attr('title','下架')
                $(obj).find('i').html('&#xe62f;');
                // 提示信息
                $(obj).parents("tr").find(".td-status").find('span').addClass('layui-btn-disabled').html('已下架');
                layer.msg('已下架!',{icon: 5,time:1000});  
          });
        }
        if($(obj).attr('title')=='下架'){
          layer.confirm('确认要上架吗？',function(index){
                //发异步把用户状态进行更改
                $(obj).attr('title','上架')
                $(obj).find('i').html('&#xe601;');

                $(obj).parents("tr").find(".td-status").find('span').removeClass('layui-btn-disabled').html('正上架');
                layer.msg('正上架!',{icon: 5,time:1000})            
          });
        }
      }

      /*商品-删除*/
      function goods_del(obj,id){
          layer.confirm('确认要删除吗？',function(index){
              //发异步删除数据
              $(obj).parents("tr").remove();
              layer.msg('已删除!',{icon:1,time:1000});
          });
      }

      function delAll (argument) {

        var data = tableCheck.getData();
  
        layer.confirm('确认要删除吗？'+data,function(index){
            //捉到所有被选中的，发异步进行删除
            layer.msg('删除成功', {icon: 1});
            $(".layui-form-checked").not('.header').parents('tr').remove();
        });
      }
    </script>
  </body>

</html>